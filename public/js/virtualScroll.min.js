!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.virtualScroll=e():t.virtualScroll=e()}(self,(()=>(()=>{"use strict";var t={502:(t,e,n)=>{function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=null;return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];n||(n=setTimeout((function(){t.apply(void 0,o),n=null}),e))}}n.d(e,{throttle:()=>i})}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,n),r.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};return(()=>{n.r(i),n.d(i,{VShandler:()=>j});var t=n(502);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function o(t,n){for(var i=0;i<n.length;i++){var o=n[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,n){if("object"!==e(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(r)?r:String(r)),o)}var r}function r(t,e){s(t,e),e.add(t)}function a(t,e,n){s(t,e),e.set(t,n)}function s(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function l(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function c(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,h(t,e,"get"))}function d(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,h(t,e,"set"),n),n}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var u=new WeakMap,f=new WeakMap,v=new WeakMap,p=new WeakMap,m=new WeakMap,y=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,x=new WeakSet,k=new WeakSet,M=new WeakSet,T=new WeakSet,W=new WeakSet,j=function(){function e(n){var i=n.items,o=n.virtualScrollAreaId,s=n.viewportHeight,h=void 0===s?500:s,j=n.itemNumInViewport,B=void 0===j?5:j,C=n.paddingNum,L=void 0===C?10:C,P=n.needItemOper,A=void 0===P||P;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,W),r(this,T),r(this,M),r(this,k),r(this,x),a(this,u,{writable:!0,value:void 0}),a(this,f,{writable:!0,value:void 0}),a(this,v,{writable:!0,value:void 0}),a(this,p,{writable:!0,value:void 0}),a(this,m,{writable:!0,value:void 0}),a(this,y,{writable:!0,value:void 0}),a(this,b,{writable:!0,value:void 0}),a(this,w,{writable:!0,value:void 0}),a(this,g,{writable:!0,value:void 0}),a(this,S,{writable:!0,value:void 0}),a(this,E,{writable:!0,value:void 0}),void 0===i||!(i instanceof Array))throw new Error("The reference of the items for virtual scrolling is required");if(void 0===o||!document.getElementById(o))throw new Error("The element for virtual scrolling is required.");d(this,u,i),d(this,f,document.getElementById(o)),c(this,f).innerHTML='\n      <div id="itemsContainer" style="overflow:hidden;">\n        <div id="viewport"></div>\n      </div>\n    ',d(this,v,document.getElementById("itemsContainer")),d(this,p,document.getElementById("viewport")),d(this,m,h),d(this,y,B),d(this,b,c(this,m)/c(this,y)),d(this,w,L),d(this,g,B+2*L),c(this,f).style.height="".concat(c(this,m),"px"),c(this,v).style.height="".concat(c(this,u).length*c(this,b),"px"),A&&l(this,x,I).call(this),d(this,S,c(this,f).getBoundingClientRect().y),c(this,f).addEventListener("scroll",(0,t.throttle)(l(this,W,O).bind(this)))}var n,i;return n=e,(i=[{key:"handleScrollContentChange",value:function(t){d(this,u,t),c(this,v).style.height="".concat(c(this,u).length*c(this,b),"px"),c(this,f).scrollTop=0,l(this,k,B).call(this,0,c(this,g)),c(this,E)&&l(this,T,L).call(this)}}])&&o(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();function I(){var t=this;d(this,E,document.createElement("div")),c(this,E).classList.add("h-100","d-flex","flex-column"),c(this,E).style.cssText="position: absolute;top: 0;left: 80%;",c(this,E).innerHTML=Array.from({length:c(this,y)},(function(t,e){return e})).reduce((function(e,n){return e+'<div class="btnField" style="height:20%">'+"".concat(n<c(t,u).length?'\n            <a href="/records/'.concat(c(t,u)[n].id,'/edit" class="btn btn-primary" id="editBtn').concat(n,'"></a>\n            <form action="/records/').concat(c(t,u)[n].id,'?_method=DELETE" method="post" style="display:inline-block;" id="deleteForm').concat(n,'"\n              data-record-info="[').concat(c(t,u)[n].date,"] ").concat(c(t,u)[n].name," $").concat(c(t,u)[n].amount,'"  onsubmit="handleDeleteReq(event)">\n              <button type="submit" class="btn btn-danger""></button>\n            </form>\n          '):"")+"</div>"}),""),c(this,f).after(c(this,E))}function B(t,e){var n=this;c(this,p).innerHTML=c(this,u).slice(t,t+e).reduce((function(e,i,o){var r=(t+o)%2==0;return e+'\n        <div class="row px-2" id="scrollItem'.concat(o,'" style="height:').concat(c(n,b),"px;").concat(r?"background-color:rgb(241, 241, 241)":"",'"\n          data-id="').concat(i.id,'" data-name="').concat(i.name,'" data-date="').concat(i.date,'" data-amount="').concat(i.amount,'">\n          <div class="col-2 d-flex justify-content-end align-items-center pa-0" style="color: rgb(162, 225, 233);">\n            <i class="').concat(i.categoryIcon,'" style="font-size: 56px"></i>\n          </div>\n          <div class="col-10 d-flex justify-content-between align-items-center"">\n            <div class="p-2">\n              <div class="fs-3 fw-bold">').concat(i.name,'</div>\n              <div class="fs-5">').concat(i.date,'</div>\n            </div>\n            <span class="fs-4 me-2">').concat(i.amount.toLocaleString("zh-Hant"),"</span>\n          </div>\n        </div>\n      ")}),"")}function C(){var t=Array.from(c(this,p).children);if(!t.length)return 0;for(var e=t[0].getBoundingClientRect().y+.3*c(this,b),n=0;n<t.length;n++,e+=c(this,b))if(e>c(this,S))return n;return 1/0}function L(){for(var t=l(this,M,C).call(this),e=t+Math.min(c(this,u).length,5),n=0,i=t;i<e;i++){var o=c(this,p).children[i].dataset,r=document.getElementById("editBtn".concat(n)),a=document.getElementById("deleteForm".concat(n));r.setAttribute("href","/records/".concat(o.id,"/edit")),a.setAttribute("action","/records/".concat(o.id,"?_method=DELETE")),a.dataset.recordInfo="[".concat(o.date,"] ").concat(o.name," $").concat(o.amount),n++}}function O(t){var e=Math.max(Math.ceil(t.target.scrollTop/c(this,b))-c(this,w),0);c(this,p).style.transform="translateY(".concat(e*c(this,b),"px)"),l(this,k,B).call(this,e,c(this,g)),c(this,E)&&l(this,T,L).call(this)}})(),i})()));